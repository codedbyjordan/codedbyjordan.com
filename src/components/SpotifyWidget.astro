---
import { Image } from "astro:assets";
import AnimatedSoundbars from "../components/AnimatedSoundbars.astro";

const nowPlayingResponse = await fetch(
  import.meta.env.PUBLIC_API_URL + "/api/spotify/now-playing",
);
const nowPlaying = await nowPlayingResponse.json();
---

<div
  class="border border-white rounded-lg w-full px-3 py-3 flex items-center justify-between"
>
  <div class="flex items-center gap-4">
    <Image
      src={nowPlaying.albumArt}
      alt="Album Art"
      width={48}
      height={48}
      class="rounded-md w-8 h-8 lg:w-12 lg:h-12"
    />

    <div class="flex flex-col text-sm lg:text-base">
      <span>Now Playing: {nowPlaying.name}</span>
      <span class="text-gray-400">
        by {nowPlaying.artist}
      </span>
    </div>
  </div>
  <AnimatedSoundbars />
</div>
